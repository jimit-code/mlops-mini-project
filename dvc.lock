schema: '2.0'
stages:
  ingest:
    cmd: python src/data_ingestion.py
    deps:
    - path: src/data_ingestion.py
      hash: md5
      md5: b15584ec8c806b8c3edcad450080e804
      size: 4486
    params:
      params.yaml:
        data_ingestion.random_state: 42
        data_ingestion.stratify: true
        data_ingestion.test_size: 0.2
    outs:
    - path: src/data/raw
      hash: md5
      md5: 48dea689a9c68a453910c365f9926260.dir
      size: 827973
      nfiles: 2
  preprocessing:
    cmd: python src/data_preprocessing.py
    deps:
    - path: src/data/raw/test.csv
      hash: md5
      md5: 79606de3f2d7add1813a50b1a29f1543
      size: 164672
    - path: src/data/raw/train.csv
      hash: md5
      md5: b40f45435b33b543d8382fac1bdbaa50
      size: 663301
    - path: src/data_preprocessing.py
      hash: md5
      md5: 1ccb038ad130c3c475105505075734a6
      size: 3874
    outs:
    - path: data/processed
      hash: md5
      md5: a5afcc4fb20def0ef130df25d3e9fd19.dir
      size: 627443
      nfiles: 2
  bow:
    cmd: python src/features/bow.py
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: dab1cfbe9fbab8b1099372add7ecc7e0
      size: 124949
    - path: data/processed/train.csv
      hash: md5
      md5: 28e5f48a4f22a58117013d8587eeef3c
      size: 502494
    - path: src/features/bow.py
      hash: md5
      md5: bffb7746683ae1b81c8bf98170461873
      size: 3648
    params:
      params.yaml:
        bow.max_features: 50000
        bow.ngram_max: 1
        bow.ngram_min: 1
    outs:
    - path: data/features/bow
      hash: md5
      md5: d739377f8f05df5bf7e930f4e7146fd4.dir
      size: 170078452
      nfiles: 2
  model_building:
    cmd: python src/models/model_building.py
    deps:
    - path: data/features/bow/train_bow.csv
      hash: md5
      md5: f0ab70fe9ef26d5cf4e03d1b549050d2
      size: 136035570
    - path: src/models/model_building.py
      hash: md5
      md5: 655c386694a6f85894d7d102721f2796
      size: 3916
    params:
      params.yaml:
        xgboost.colsample_bytree: 0.8
        xgboost.eval_metrics: logloss
        xgboost.learning_rate: 0.1
        xgboost.max_depth: 8
        xgboost.n_estimators: 700
        xgboost.random_state: 42
        xgboost.reg_lambda: 1.0
        xgboost.sub_sample: 0.9
        xgboost.tree_method: hist
    outs:
    - path: model/xgb.joblib
      hash: md5
      md5: d0b4b9ecacb12626a04d9100686caace
      size: 26873
  model_eval:
    cmd: python src/models/model_evaluation.py
    deps:
    - path: data/features/bow/test.bow.csv
      hash: md5
      md5: 33d858575e01d5dac3a13cee40ebf657
      size: 34042882
    - path: model/xgb.joblib
      hash: md5
      md5: d0b4b9ecacb12626a04d9100686caace
      size: 26873
    - path: src/models/model_evaluation.py
      hash: md5
      md5: 3c677869b3ca6ff142bd9eb849fdf129
      size: 7646
    outs:
    - path: reports/metrics.json
      hash: md5
      md5: b5eecc6e7242cf7fc3bafab0d57310b3
      size: 122
    - path: reports/model_info.json
      hash: md5
      md5: 8ce30a80395b3a5d455a27f735924ec2
      size: 82
  model-registry:
    cmd: python src/models/model_registry.py
    deps:
    - path: model/xgb.joblib
      hash: md5
      md5: d0b4b9ecacb12626a04d9100686caace
      size: 26873
    - path: reports/model_info.json
      hash: md5
      md5: 8ce30a80395b3a5d455a27f735924ec2
      size: 82
    - path: src/models/model_registry.py
      hash: md5
      md5: ba791e539f3b7ea32e6bf0e929a149fe
      size: 4715
  model-staging-pointer:
    cmd: python src/models/model_staging_pointer.py
    deps:
    - path: reports/model_info.json
      hash: md5
      md5: 44293739a2a5a22f6596403811637282
      size: 93
    - path: src/models/model_staging_pointer.py
      hash: md5
      md5: 070dcdd74341308f9f8663994a2d0cc6
      size: 1991
    outs:
    - path: reports/staging_model.json
      hash: md5
      md5: d6b13aec60d840b31813884103f46ece
      size: 89
